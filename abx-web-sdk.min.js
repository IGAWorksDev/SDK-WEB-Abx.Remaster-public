!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var r in i)("object"==typeof exports?exports:e)[r]=i[r]}}(window,(function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=14)}([function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function i(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}},function(e,t){function i(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=i=function(e){return typeof e}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(t)}e.exports=i},function(e,t,i){e.exports=i(9)},function(e,t,i){var r=i(10),n=i(11),o=i(12),a=i(13);e.exports=function(e){return r(e)||n(e)||o(e)||a()}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}},function(e,t){function i(e,t,i,r,n,o,a){try{var s=e[o](a),u=s.value}catch(e){return void i(e)}s.done?t(u):Promise.resolve(u).then(r,n)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,u,"next",e)}function u(e){i(a,n,o,s,u,"throw",e)}s(void 0)}))}}},function(e,t,i){var r;
/*!
 * UAParser.js v0.7.21
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright Â© 2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */!function(n,o){"use strict";var a="model",s="name",u="type",l="vendor",c="version",d="mobile",p="tablet",h="smarttv",f={extend:function(e,t){var i={};for(var r in e)t[r]&&t[r].length%2==0?i[r]=t[r].concat(e[r]):i[r]=e[r];return i},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},v={rgx:function(e,t){for(var i,r,n,o,a,s,u=0;u<t.length&&!a;){var l=t[u],c=t[u+1];for(i=r=0;i<l.length&&!a;)if(a=l[i++].exec(e))for(n=0;n<c.length;n++)s=a[++r],"object"==typeof(o=c[n])&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;u+=2}},str:function(e,t){for(var i in t)if("object"==typeof t[i]&&t[i].length>0){for(var r=0;r<t[i].length;r++)if(f.has(t[i][r],e))return"?"===i?void 0:i}else if(f.has(t[i],e))return"?"===i?void 0:i;return e}},b={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[s,c],[/(konqueror)\/([\w\.]+)/i],[[s,"Konqueror"],c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(Avast)\/([\w\.]+)/i],[[s,"Avast Secure Browser"],c],[/(AVG)\/([\w\.]+)/i],[[s,"AVG Secure Browser"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],c],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],c],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(windowswechat qbcore)\/([\w\.]+)/i],[[s,"WeChat(Win) Desktop"],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],c],[/(qqbrowserlite)\/([\w\.]+)/i],[s,c],[/(QQ)\/([\d\.]+)/i],[s,c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[s,c],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,c],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,c],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],c],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[s,"Sailfish Browser"],c],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[s,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,v.str,b.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[a,l,[u,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[l,"Apple"],[u,p]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[l,"Apple"],[u,h]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,a,[u,p]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[l,"Amazon"],[u,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,v.str,b.device.amazon.model],[l,"Amazon"],[u,d]],[/android.+aft([bms])\sbuild/i],[a,[l,"Amazon"],[u,h]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,l,[u,d]],[/\((ip[honed|\s\w*]+);/i],[a,[l,"Apple"],[u,d]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,a,[u,d]],[/\(bb10;\s(\w+)/i],[a,[l,"BlackBerry"],[u,d]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[a,[l,"Asus"],[u,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[a,"Xperia Tablet"],[u,p]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[a,[l,"Sony"],[u,d]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,a,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[l,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[l,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[l,v.str,b.device.sprint.vendor],[a,v.str,b.device.sprint.model],[u,d]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[l,[a,/_/g," "],[u,d]],[/(nexus\s9)/i],[a,[l,"HTC"],[u,p]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[a,[l,"Huawei"],[u,d]],[/android.+(bah2?-a?[lw]\d{2})/i],[a,[l,"Huawei"],[u,p]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,a,[u,d]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[l,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[l,"Microsoft"],[u,d]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[l,"Motorola"],[u,d]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[l,"Motorola"],[u,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,f.trim],[a,f.trim],[u,h]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[l,"Samsung"],[u,h]],[/\(dtv[\);].+(aquos)/i],[a,[l,"Sharp"],[u,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],a,[u,p]],[/smart-tv.+(samsung)/i],[l,[u,h],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[l,"Samsung"],a,[u,d]],[/sie-(\w*)/i],[a,[l,"Siemens"],[u,d]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[l,"Nokia"],a,[u,d]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[a,[l,"Acer"],[u,p]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[l,"LG"],[u,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],a,[u,p]],[/(lg) netcast\.tv/i],[l,a,[u,h]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[l,"LG"],[u,d]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[l,a,[u,p]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[l,"Lenovo"],[u,p]],[/(lenovo)[_\s-]?([\w-]+)/i],[l,a,[u,d]],[/linux;.+((jolla));/i],[l,a,[u,d]],[/((pebble))app\/[\d\.]+\s/i],[l,a,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,a,[u,d]],[/crkey/i],[[a,"Chromecast"],[l,"Google"],[u,h]],[/android.+;\s(glass)\s\d/i],[a,[l,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[a,[l,"Google"],[u,p]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[a,[l,"Google"],[u,d]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[u,d]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[l,"Xiaomi"],[u,p]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[l,"Meizu"],[u,d]],[/(mz)-([\w-]{2,})/i],[[l,"Meizu"],a,[u,d]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[a,[l,"OnePlus"],[u,d]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[l,"RCA"],[u,p]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[l,"Dell"],[u,p]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[l,"Verizon"],[u,p]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],a,[u,p]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[l,"NuVision"],[u,p]],[/android.+;\s(k88)\sbuild/i],[a,[l,"ZTE"],[u,p]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[l,"Swiss"],[u,d]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[l,"Swiss"],[u,p]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[l,"Zeki"],[u,p]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[l,"Dragon Touch"],a,[u,p]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[l,"Insignia"],[u,p]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[l,"NextBook"],[u,p]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],a,[u,d]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[l,"LvTel"],a,[u,d]],[/android.+;\s(PH-1)\s/i],[a,[l,"Essential"],[u,d]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[l,"Envizen"],[u,p]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[l,a,[u,p]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[l,"MachSpeed"],[u,p]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,a,[u,p]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[l,"Rotor"],[u,p]],[/android.+(KS(.+))\s+build/i],[a,[l,"Amazon"],[u,p]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[l,a,[u,p]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,f.lowerize],l,a],[/[\s\/\(](smart-?tv)[;\)]/i],[[u,h]],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[c,[s,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]{1,9}).+(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,v.str,b.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,v.str,b.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,c]]},g=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof g))return new g(e,t).getResult();var i=e||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),r=t?f.extend(y,t):y;return this.getBrowser=function(){var e={name:void 0,version:void 0};return v.rgx.call(e,i,r.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return v.rgx.call(e,i,r.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return v.rgx.call(e,i,r.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return v.rgx.call(e,i,r.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return v.rgx.call(e,i,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};g.VERSION="0.7.21",g.BROWSER={NAME:s,MAJOR:"major",VERSION:c},g.CPU={ARCHITECTURE:"architecture"},g.DEVICE={MODEL:a,VENDOR:l,TYPE:u,CONSOLE:"console",MOBILE:d,SMARTTV:h,TABLET:p,WEARABLE:"wearable",EMBEDDED:"embedded"},g.ENGINE={NAME:s,VERSION:c},g.OS={NAME:s,VERSION:c},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=g),t.UAParser=g):void 0===(r=function(){return g}.call(t,i,t,e))||(e.exports=r);var _=n&&(n.jQuery||n.Zepto);if(_&&!_.ua){var x=new g;_.ua=x.getResult(),_.ua.get=function(){return x.getUA()},_.ua.set=function(e){x.setUA(e);var t=x.getResult();for(var i in t)_.ua[i]=t[i]}}}("object"==typeof window?window:this)},function(e,t,i){var r=function(e){"use strict";var t=Object.prototype,i=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,i){return e[t]=i}}function u(e,t,i,r){var n=t&&t.prototype instanceof d?t:d,o=Object.create(n.prototype),a=new k(r||[]);return o._invoke=function(e,t,i){var r="suspendedStart";return function(n,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw o;return P()}for(i.method=n,i.arg=o;;){var a=i.delegate;if(a){var s=x(a,i);if(s){if(s===c)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===r)throw r="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r="executing";var u=l(e,t,i);if("normal"===u.type){if(r=i.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(r="completed",i.method="throw",i.arg=u.arg)}}}(e,i,a),o}function l(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c={};function d(){}function p(){}function h(){}var f={};f[n]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(O([])));b&&b!==t&&i.call(b,n)&&(f=b);var y=h.prototype=d.prototype=Object.create(f);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){var r;this._invoke=function(n,o){function a(){return new t((function(r,a){!function r(n,o,a,s){var u=l(e[n],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}(n,o,r,a)}))}return r=r?r.then(a,a):a()}}function x(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var n=r.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(m,this),this.reset(!0)}function O(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=y.constructor=h,h.constructor=p,p.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(_.prototype),_.prototype[o]=function(){return this},e.AsyncIterator=_,e.async=function(t,i,r,n,o){void 0===o&&(o=Promise);var a=new _(u(t,i,r,n),o);return e.isGeneratorFunction(i)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(y),s(y,a,"Generator"),y[n]=function(){return this},y.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var r=t.pop();if(r in e)return i.value=r,i.done=!1,i}return i.done=!0,i}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(i,r){return a.type="throw",a.arg=e,t.next=i,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),w(i),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var r=i.completion;if("throw"===r.type){var n=r.arg;w(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:O(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,i){var r=i(6);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t,i){var r=i(6);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,i){"use strict";i.r(t),i.d(t,"adbrix",(function(){return ne}));var r,n,o,a,s,u,l,c,d=i(4),p=i.n(d),h=i(7),f=i.n(h),v=i(1),b=i.n(v),y=i(2),g=i.n(y),_=i(0),x=i.n(_),m=function(e,t,i){var r=null!==t?null==i?void 0:i.expireDay:-1,n=null;if(r){var o=new Date;o.setTime(o.getTime()+864e5*r),n=o.toUTCString()}var a="".concat(e,"=").concat(t);return n&&(a+="; expires=".concat(n)),a+="; path=/",(null==i?void 0:i.domain)&&(a+="; domain=".concat(null==i?void 0:i.domain)),(null==i?void 0:i.secure)&&(a+="; Secure"),(null==i?void 0:i.sameSite)&&(a+="; SameSite=".concat(null==i?void 0:i.sameSite)),document.cookie=a,t},w=function(e){var t=RegExp("".concat(e,"=.[^;]*")),i=document.cookie.match(t);return i?i[0].split("=")[1]:null},k=m,O=function(e){m(e,null)},P=function(e){var t=new RegExp(["^(https?:)//","(([^:/?#]*)(?::([0-9]+))?)","(/{0,1}[^?#]*)","(\\?[^#]*|)","(#.*|)$"].join("")),i=e.match(t);return i?{href:e,protocol:i[1],host:i[2],hostname:i[3],port:i[4],pathname:i[5],search:i[6],hash:i[7]}:{href:e,protocol:"",host:"",hostname:"",port:"",pathname:"",search:"",hash:""}},E=function(){return P(location.href).hostname},U="",I=function(e){U=e,!0},C=P,T=function(e){var t=function(e){return decodeURIComponent(e.replace(/\+/g," "))},i=/([^&=]+)=?([^&]*)/g,r="";r=e||window.location.search.substring(1);for(var n={},o=null;o=i.exec(r);)n[t(o[1])]=t(o[2]);return n},N=E,S=function(){return P(location.href).pathname},V=function(){if(""!==U)return U;var e=E(),t=e.split("."),i=t[t.length-1],r=[];if(4===t.length&&i===parseInt(i,10))return I(""),e;if(t.length<=1)return I(""),U="",e;for(var n=t.length-2;n>=0;--n)r.push(t.slice(n).join("."));for(var o=0;o<r.length;++o){var a="__abx_top_domain_test__",s=r[o],u={domain:"."+s,expireDay:1};if(k(a,"domain",u),w(a))return k(a,null,u),I(s),s}return I(""),""},L=i(3),A=i.n(L),R=function(e,t){return e.hasOwnProperty(t)};!function(e){e.UTM_SOURCE="utm_source",e.UTM_MEDIUM="utm_medium",e.UTM_CAMPAIGN="utm_campaign",e.UTM_TERM="utm_term",e.UTM_CONTENT="utm_content"}(r||(r={})),function(e){e.N_CAMPAIGN_TYPE="n_campaign_type",e.N_AD_GROUP="n_ad_group",e.N_MEDIA="n_media",e.N_AD="n_ad",e.N_KEYWORD="n_keyword",e.N_KEYWORD_ID="n_keyword_id",e.N_QUERY="n_query",e.N_RANK="n_rank",e.N_MALL_PID="n_mall_pid",e.N_CONTRACT="n_contract"}(n||(n={})),function(e){e.Kakao="Kakao",e.Naver="Naver",e.Line="Line",e.Google="Google",e.Facebook="Facebook",e.Twitter="Twitter",e.whatsApp="whatsApp",e.QQ="QQ",e.WeChat="WeChat",e.UserId="UserId",e.ETC="ETC",e.SkTid="SkTid",e.AppleId="AppleId"}(o||(o={})),function(e){e.KRW="KRW",e.USD="USD",e.JPY="JPY",e.EUR="EUR",e.GBP="GBP",e.CNY="CNY",e.TWD="TWD",e.HKD="HKD",e.IDR="IDR",e.INR="INR",e.RUB="RUB",e.THB="THB",e.VND="VND",e.MYR="MYR"}(a||(a={})),function(e){e.CreditCard="CreditCard",e.BankTransfer="BankTransfer",e.MobilePayment="MobilePayment",e.ETC="ETC"}(s||(s={})),function(e){e.string="string",e.long="long",e.double="double",e.boolean="boolean",e.array="array",e.dictionary="dictionary"}(u||(u={})),function(e){e[e.DISABLE=0]="DISABLE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO"}(l||(l={})),function(e){e.abx="abx",e.custom="custom"}(c||(c={}));var D={SDK_VERSION:"1.0.0.0",API_VERION:"1.0.0.0",MAX_PROPERTY_KEYS:100,MAX_PROPERTY_KEY_LENGTH:256,MAX_PROPERTY_VALUE_BYTE_SIZE:1024,ADBRIX_PREFIX_COOKIE_KEY:"_abx_",ADBRIX_PREDEFINED_EVENTS:["firstopen","start_session","deeplink_open","login","logout","signup","sign_up","daily_first_open","user_property_changed","page_view","invite","use_credit","purchase"]},j=function(){function e(t){var i=this;b()(this,e),x()(this,"jsonMerge",(function(e,t){var i=JSON.parse(JSON.stringify(e));return Object.assign(i,t)})),x()(this,"jsonEqual",(function(e,t){return JSON.stringify(e)===JSON.stringify(t)})),x()(this,"getType",(function(e){if(void 0===e)return"undefined";if(null===e)return"null";switch(Object.prototype.toString.call(e)){case"[object Function]":return"function";case"[object Array]":return"array";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Error]":return"error";case"[object Arguments]":return"arguments"}return e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e),A()(e)})),x()(this,"propertyDataTypeToArray",(function(){var e=["number"];return Object.keys(u).forEach((function(t){e.push(t.toString())})),e})),x()(this,"allowDateTypes",this.propertyDataTypeToArray()),x()(this,"isNil",(function(e){return null==e})),x()(this,"checkMaxByteSize",(function(e){return encodeURI(e.toString()).split(/%..|./).length-1<=D.MAX_PROPERTY_VALUE_BYTE_SIZE})),x()(this,"permittedKey",(function(e){var t=e.toLowerCase();return!!/^[a-z0-9_]/.test(t)&&!/[^a-z0-9_:]+/g.test(t.substring(1))})),x()(this,"isValidInputKey",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=i.getType(e);return i.isNil(e)?(t&&i._abxOptions.trace.error("required key.. '".concat(e,"'")),!1):"string"!==r?(t&&i._abxOptions.trace.error("The format is incorrect. Please put the key as a string. '".concat(e,"'")),!1):""===e?(i._abxOptions.trace.error("The key must have a value of at least 1 character. '".concat(e,"'")),!1):e.length>D.MAX_PROPERTY_KEY_LENGTH?(t&&i._abxOptions.trace.error("It can only contain up to ".concat(D.MAX_PROPERTY_KEY_LENGTH," characters '").concat(e,"'")),!1):!!i.permittedKey(e)||(t&&i._abxOptions.trace.error("Keys are only allowed in the /^[a-z0-9_]*$/ pattern. '".concat(e,"'")),!1)})),x()(this,"isValidInputValue",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=i.getType(e);return i.allowDateTypes.includes(r)?!!i.checkMaxByteSize(e)||(t&&i._abxOptions.trace.error("The value can be up to ".concat(D.MAX_PROPERTY_VALUE_BYTE_SIZE," bytes in size. '").concat(e,"'")),!1):(t&&i._abxOptions.trace.error("Not a valid value. Only (string, number, boolean) '".concat(e,"'")),!1)})),x()(this,"isValidInputValueType",(function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=i.getType(t);return r.includes(o)?!!i.checkMaxByteSize(t)||(n&&i._abxOptions.trace.error("The value can be up to ".concat(D.MAX_PROPERTY_VALUE_BYTE_SIZE," bytes in size. '").concat(t,"'")),!1):(n&&i._abxOptions.trace.error("Not a valid '".concat(e,"'. Only that value type is allowed. '").concat(r.join(", "),"' '").concat(t,"'")),!1)})),x()(this,"isValidInputProperties",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=i.getType(e);return"object"!==r?(t&&i._abxOptions.trace.error("Not a valid '".concat(e,"'. Only that value type is allowed. (object)")),!1):!(Object.keys(e).length>D.MAX_PROPERTY_KEYS)||(t&&i._abxOptions.trace.error("too many properties (more than ".concat(D.MAX_PROPERTY_KEYS,")")),!1)})),x()(this,"isValidInputPropertiesKeyValue",(function(e){for(var t=!0,r=Object.keys(e),n=0;n<r.length;n++){var o=r[n].toLowerCase(),a=e[r[n]],s=i.isValidInputKey(o),u=i.isValidInputValue(a);if(!s){t=!1;break}if(!u){t=!1;break}}return t})),x()(this,"parsePropertyDataType",(function(e){var t=null;switch(i.getType(e)){case"string":t=u.string;break;case"number":isNaN(e)||-1===e.toString().indexOf(".")||(t=u.double),t=u.long;break;case"boolean":t=u.boolean;break;default:i._abxOptions.trace.error("It is not allowed. Only that value type is allowed. (".concat(i.allowDateTypes.join(", "),")"))}return t})),x()(this,"parsePropertiesV1",(function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(i,r){var n=e[r];t[n.key]=function e(t){if(t)switch(t.dataType){case u.string:case u.double:case u.long:case u.boolean:return t.value;case u.array:var i=t.value,r=[];return i.forEach((function(t){r.push(e(t))})),r;case u.dictionary:var n=t.value,o={};return n.forEach((function(t){o[t.key]=e(t)})),o}}(n)})),t})),x()(this,"parsePropertiesV2",(function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(i,r){var n=e[r];n&&(t[n.key]="".concat(n.dataType,":").concat(n.value))})),t})),this._abxOptions=t}return g()(e,[{key:"isValidTimestampAndGuid",value:function(e){return new RegExp(/^[0-9]{13}:[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}/).test(e)}},{key:"getAdbrixPropertyV2",value:function(e,t){var i=this.isValidInputKey(e),r=this.isValidInputValue(t),n=this.parsePropertyDataType(t);return i&&r&&n?{key:e,value:t,dataType:n}:null}}]),e}(),M=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},B=function(){function e(t){var i=this;b()(this,e),x()(this,"getLastLogId",(function(){var e;return null===(e=i._get())||void 0===e?void 0:e.lastEventLogId})),x()(this,"getLastFirstOpenIdCookie",(function(){var e;return null===(e=i._get())||void 0===e?void 0:e.lastFirstOpenId})),x()(this,"setLastFirstOpenIdCookie",(function(){var e="".concat((new Date).getTime(),":").concat(M()),t=i._get();t.lastFirstOpenId=e,t.lastEventLogId=e,i._save(t)})),x()(this,"getLastDeeplinkOpenIdCookie",(function(){var e;return null===(e=i._get())||void 0===e?void 0:e.lastDeeplinkId})),x()(this,"setLastDeeplinkOpenIdCookie",(function(){var e="".concat((new Date).getTime(),":").concat(M()),t=i._get();t.lastDeeplinkId=e,i._save(t)})),x()(this,"getFirstPartyCookie",(function(){var e;return null===(e=i._get())||void 0===e?void 0:e.firstPartyId})),x()(this,"isFirstPartyCookie",(function(){return!!i.getFirstPartyCookie()})),x()(this,"setFirstPartyCookie",(function(e){var t="".concat(M()),r=i._get();r.firstPartyId=t,i._save(r),i._abxOptions.trace.info("created first party id: ".concat(t)),e&&e()})),x()(this,"getSessionIdCookie",(function(){var e=i._get().session;return e?e.sessionId:null})),x()(this,"getSessionCookie",(function(){var e=i._get().session;return e||null})),x()(this,"isSessionIdCookie",(function(){return!!i.getSessionIdCookie()})),x()(this,"setSessionIdCookie",(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?(e=t,i._abxOptions.trace.info("updated session : ".concat(JSON.stringify(e)))):(e={sessionId:M(),lastUpdate:(new Date).getTime()},i._abxOptions.trace.info("new created session : ".concat(JSON.stringify(e))));var r=i._get();r.session=e,i._save(r)})),x()(this,"_isSessionIdCookieCheckedExpireSec",(function(){var e=i.getSessionCookie();return!e||!e.lastUpdate||((new Date).getTime()-e.lastUpdate)/1e3>i._abxOptions.sessionExpireSec})),x()(this,"syncSessionIdCookie",(function(){var e=i.getSessionCookie(),t=i._isSessionIdCookieCheckedExpireSec();!e||t?i.setSessionIdCookie():(e.lastUpdate=(new Date).getTime(),i.setSessionIdCookie(e))})),x()(this,"getUserHashId",(function(){var e;return null===(e=i._get())||void 0===e?void 0:e.userId})),x()(this,"setUserHashId",(function(e){var t=i._get();t.userId=e,i._save(t)})),x()(this,"removeUserHashId",(function(){var e=i._get();e.userId=null,i._save(e)})),x()(this,"setUserProperty",(function(e){var t=i._get().userProperty;if(e&&t){if(JSON.stringify(t.userProperty)!==JSON.stringify(e.userProperty)){e.snapshot=M();var r=i._get();r.userProperty=e,i._save(r),i._abxOptions.trace.info("new user property: ".concat(JSON.stringify(e)))}}else{e.snapshot=M();var n=i._get();n.userProperty=e,i._save(n),i._abxOptions.trace.info("new user property: ".concat(JSON.stringify(e)))}return e})),x()(this,"getUserProperty",(function(){var e=i._get().userProperty;return e||i.setUserProperty({userProperty:[],snapshot:null})})),x()(this,"getLastDailyFirstOpenTimeCookie",(function(){var e;return null===(e=i._get())||void 0===e?void 0:e.lastDailyFirstOpenTime})),x()(this,"isLastDailyFirstOpenTimeCookie",(function(){return!!i.getLastDailyFirstOpenTimeCookie()})),x()(this,"setLastDailyFirstOpenTimeCookie",(function(e){var t=i._get();t.lastDailyFirstOpenTime=e,i._save(t)})),this._abxOptions=t}return g()(e,[{key:"_getKey",value:function(){var e="".concat(D.ADBRIX_PREFIX_COOKIE_KEY,"_").concat(this._abxOptions.appkey);return this._abxOptions.shareSubdomainCookie||(e="".concat(e,"_").concat(N())),e}},{key:"_defaultData",value:function(){return{firstPartyId:null,lastFirstOpenId:null,lastEventLogId:null,lastDailyFirstOpenTime:null,session:{sessionId:null,lastUpdate:null},userId:null,userProperty:{userProperty:[],snapshot:null}}}},{key:"_getDomain",value:function(){if(!this._abxOptions.shareSubdomainCookie)return N();var e=V();return-1!==e.indexOf(".")&&(e=".".concat(e)),e}},{key:"_save",value:function(e){var t=this._getKey();k(t,JSON.stringify(e),{expireDay:3650,domain:this._getDomain()})}},{key:"_get",value:function(){var e=w(this._getKey());if(null!=e)try{return JSON.parse(e)}catch(e){this._abxOptions.trace.info("".concat(this._getKey()," : delete to cookie value parsing failure")),O(this._getKey())}return this._defaultData()}},{key:"setLastLogId",value:function(e){var t=this._get();t.lastEventLogId=e,this._save(t)}}]),e}(),F=function(){function e(t){b()(this,e),this._abxOptions=t,this._abxUtil=new j(this._abxOptions),this._abxCookie=new B(this._abxOptions),this._userProperty=this._abxCookie.getUserProperty()}return g()(e,[{key:"defaultUserProperty",value:function(){return{userProperty:[],snapshot:null}}},{key:"isNullUser",value:function(){return this._abxUtil.jsonEqual(this._userProperty,this.defaultUserProperty())}},{key:"syncUserPropertyWithCookie",value:function(){this.isNullUser()?this._userProperty=this._abxCookie.getUserProperty():this._userProperty=this._abxCookie.setUserProperty(this._userProperty)}},{key:"removeUserPropertyKey",value:function(e){var t=!1;if(this._userProperty){var i=this._userProperty.userProperty.findIndex((function(t){return t.key===e}));i>-1&&(this._userProperty.userProperty.splice(i,1),t=!0)}return this.syncUserPropertyWithCookie(),t}},{key:"setUserPropertyKeyValue",value:function(e){var t=this;null!=e.value?"array"===this._abxUtil.getType(this._userProperty.userProperty)?(this._userProperty.userProperty.some((function(t){return t.key===e.key}))?this._userProperty.userProperty.forEach((function(i,r){i.key===e.key&&(t._userProperty.userProperty[r]=e)})):this._userProperty.userProperty.push(e),this.syncUserPropertyWithCookie()):(this._userProperty.userProperty=[],this._userProperty.userProperty.push(e),this.syncUserPropertyWithCookie()):this.removeUserPropertyKey(e.key)}},{key:"clearUserProperty",value:function(){var e=this._userProperty.userProperty.length>0;return this._userProperty.userProperty=[],this.syncUserPropertyWithCookie(),e}},{key:"userProperty",get:function(){return this._userProperty}}]),e}(),z=function(){function e(t){b()(this,e),this._abxOptions=t,this._abxUtil=new j(this._abxOptions),this._abxCookie=new B(this._abxOptions)}return g()(e,[{key:"eventParam",value:function(e,t){var i=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n={eventName:e,eventProperties:[]};if(this._abxUtil.isNil(t))return n;var o=function(e,t){var n=e;r&&(n="c:".concat(n));var o=i._abxUtil.getAdbrixPropertyV2(n,t);return o||null},a=function(e){var t=!0,r=[];return e.forEach((function(e){if(i._abxUtil.isValidInputProperties(e)){var n={key:null,dataType:u.dictionary,value:[]};Object.keys(e).forEach((function(i){var r=i.toLowerCase(),a=e[i],s=o(r,a);null===s?t=!1:n.value.push(s)})),r.push(n)}})),t?r:null},s=t;if(this._abxUtil.isValidInputProperties(s)){var l=!0;if(Object.keys(s).forEach((function(e){var t=e.toLowerCase(),r=s[e];if("abx:items"===t&&i._abxUtil.isValidInputValueType(t,r,["array"])){var c={key:"abx:items",dataType:u.array,value:null},d=a(r);null===d?l=!1:(c.value=d,n.eventProperties.push(c))}else{var p=o(e.toLowerCase(),r);null===p?l=!1:n.eventProperties.push(p)}})),l)return n}return null}}]),e}(),K=i(5),q=i.n(K),G={createPixel:function(e,t,i){var r=new Image(1,1),n=t+encodeURIComponent(JSON.stringify(i));r.onload=function(){e.trace.info("send complete. path:".concat(t," , json:").concat(JSON.stringify(i)))},r.onerror=function(){e.trace.error("send error. path:".concat(t," , json:").concat(JSON.stringify(i)))},r.src=n}},H={isPortrait:function(){return!window.screen||(!window.screen.orientation||(!window.screen.orientation.type||-1!==window.screen.orientation.type.indexOf("portrait")))},width:window.screen?window.screen.width:0,height:window.screen?window.screen.height:0,resolution:window.screen?"number"==typeof window.screen.width?"".concat(window.screen.width,"x").concat(window.screen.height):"0x0":0,userLanguage:(navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||"").toString(),userAgent:navigator.userAgent},Y=i(8),J=i.n(Y),W="".concat("https://event.adbrix.io/api/v1/"),Q=function(){function e(t){b()(this,e),x()(this,"_commonParam",[]),x()(this,"_abxPixel",G),this._abxOptions=t,this._abxCookie=new B(this._abxOptions),this._abxUtil=new j(this._abxOptions),this.initDefaultCommonParam()}return g()(e,[{key:"defaultCommonParam",value:function(){return{key:"abx:path",value:S(),dataType:u.string}}},{key:"initDefaultCommonParam",value:function(){this._commonParam=[]}},{key:"setAndGetLogId",value:function(){var e="".concat((new Date).getTime(),":").concat(M());return this._abxCookie.setLastLogId(e),e}},{key:"getLastFirstOpenLogId",value:function(){return this._abxCookie.getLastFirstOpenIdCookie()}},{key:"getLastDeeplinkLogId",value:function(){return this._abxCookie.getLastDeeplinkOpenIdCookie()}},{key:"isAdbrixPredefinedEvents",value:function(e){return D.ADBRIX_PREDEFINED_EVENTS.some((function(t){return t===e}))}},{key:"getBaseRequestJsonObject",value:function(){var e,t,i,r,n,o,a,s=new J.a.UAParser,u=null==(null===(e=s.getOS())||void 0===e?void 0:e.name)?null:"".concat(null===(t=s.getOS())||void 0===t?void 0:t.name," ").concat(null===(i=s.getOS())||void 0===i?void 0:i.version).toLowerCase();return{request_datetime:(new Date).toISOString(),identity:{cookie:this._abxCookie.getFirstPartyCookie(),uuid:null,adid:"cookie:".concat(this._abxCookie.getFirstPartyCookie()),idfv:null,ad_id_opt_out:this._abxOptions.isOptOut,user_hash:this._abxOptions.userHash,device_id:null},device_info:{os:u,model:null!==(r=null===(n=s.getBrowser())||void 0===n?void 0:n.version.toLowerCase())&&void 0!==r?r:null,vendor:null!==(o=null===(a=s.getBrowser())||void 0===a?void 0:a.name.toLowerCase())&&void 0!==o?o:null,resolution:H.resolution,is_portrait:H.isPortrait(),platform:"web",network:null,carrier:null,language:null==H?void 0:H.userLanguage.toLowerCase(),country:null,time_zone_offset:-1*(new Date).getTimezoneOffset()},package_name:N(),appkey:this._abxOptions.appkey,api_version:this._abxOptions.apiVersion,sdk_version:this._abxOptions.sdkVersion,installer:null,app_version:this._abxOptions.appVersion,build_id:null,last_firstopen_id:this._abxCookie.getLastFirstOpenIdCookie(),last_deeplink_id:this._abxCookie.getLastDeeplinkOpenIdCookie()}}},{key:"getEventRequestJsonObject",value:function(e){var t=e.group===c.abx&&"firstopen"===e.eventName,i=e.group===c.abx&&"deeplink_open"===e.eventName;return{prev_id:t?null:this._abxCookie.getLastLogId(),event_datetime:(new Date).toISOString(),group:e.group,event_name:e.eventName,param:null===e.properties?{}:this._abxUtil.parsePropertiesV1(e.properties),session_interval:0,session_length:0,log_id:t?this.getLastFirstOpenLogId():i?this.getLastDeeplinkLogId():this.setAndGetLogId(),session_id:this._abxCookie.getSessionIdCookie(),user_snapshot_id:this._abxCookie.getUserProperty().snapshot,location:null,user_properties:this._abxUtil.parsePropertiesV1(this._abxCookie.getUserProperty().userProperty)}}},{key:"addCommonParam",value:function(e){this._commonParam.push(e)}},{key:"addCommonParams",value:function(e){var t=this;e.length>0&&e.forEach((function(e){t._commonParam.push(e)}))}},{key:"_sendEvent",value:function(e){this._abxPixel.createPixel(this._abxOptions,"".concat(W,"event/bulk/").concat(this._abxOptions.appkey,"/?e="),e),this._abxOptions.trace.info(JSON.stringify(e))}},{key:"_getEventParam",value:function(e,t){var i={group:t&&this.isAdbrixPredefinedEvents(e.eventName)?c.abx:c.custom,eventName:e.eventName,properties:[this.defaultCommonParam()].concat(q()(this._commonParam),q()(e.eventProperties))};return this.getEventRequestJsonObject(i)}},{key:"sendEvent",value:function(e,t){var i={common:this.getBaseRequestJsonObject(),evts:[]};i.evts.push(this._getEventParam(e,t)),this._sendEvent(i)}},{key:"sendEventBulk",value:function(e,t){var i=this,r={common:this.getBaseRequestJsonObject(),evts:[]};e.forEach((function(e){r.evts.push(i._getEventParam(e,t))})),this._sendEvent(r)}}]),e}(),X=function(){function e(t){b()(this,e),this._abxOptions=t,this._abxUtil=new j(this._abxOptions)}return g()(e,[{key:"getPropsQueryParamByPrefix",value:function(e,t,i){var r=this,n=[];return Object.keys(e).forEach((function(o){var a=o.toLowerCase();if(a.indexOf("".concat(t,"_"))>-1){var s=r._abxUtil.getAdbrixPropertyV2("".concat(i,":").concat(a),e[o]);s&&n.push(s)}})),n}},{key:"getPropsQueryParamByKey",value:function(e,t,i){var r=this,n=[];return Object.keys(e).forEach((function(o){var a=o.toLowerCase();if(a===t){var s=r._abxUtil.getAdbrixPropertyV2("".concat(i,":").concat(a),e[o]);s&&n.push(s)}})),n}},{key:"getPropsQueryParamByKeys",value:function(e,t,i){var r=this,n=[];return Object.keys(e).forEach((function(o){var a=o.toLowerCase();if(t.some((function(e){return e.toLowerCase()===a}))){var s=r._abxUtil.getAdbrixPropertyV2("".concat(i,":").concat(a),e[o]);s&&n.push(s)}})),n}},{key:"getUtmParamData",value:function(e){return this.getPropsQueryParamByKeys(e,Object.values(r),"abx")}},{key:"getNaverParamData",value:function(e){return this.getPropsQueryParamByKeys(e,Object.values(n),"abx")}},{key:"getGclidParamData",value:function(e){return this.getPropsQueryParamByKey(e,"gclid","abx")}},{key:"getCustomParamData",value:function(e,t){return this.getPropsQueryParamByKeys(e,t,"custom")}}]),e}();function Z(e){function t(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function i(e,t){return e>>>t|e<<32-t}function r(e,t){return e>>>t}function n(e,t,i){return e&t^~e&i}function o(e,t,i){return e&t^e&i^t&i}function a(e){return i(e,2)^i(e,13)^i(e,22)}function s(e){return i(e,6)^i(e,11)^i(e,25)}function u(e){return i(e,7)^i(e,18)^r(e,3)}return function(e){for(var t="0123456789abcdef",i="",r=0;r<4*e.length;r++)i+=t.charAt(e[r>>2]>>8*(3-r%4)+4&15)+t.charAt(e[r>>2]>>8*(3-r%4)&15);return i}(function(e,l){var c,d,p,h,f,v,b,y,g,_,x,m=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),k=new Array(64);e[l>>5]|=128<<24-l%32,e[15+(l+64>>9<<4)]=l;for(var O=0;O<e.length;O+=16){c=w[0],d=w[1],p=w[2],h=w[3],f=w[4],v=w[5],b=w[6],y=w[7];for(var P=0;P<64;P++)k[P]=P<16?e[P+O]:t(t(t(i(x=k[P-2],17)^i(x,19)^r(x,10),k[P-7]),u(k[P-15])),k[P-16]),g=t(t(t(t(y,s(f)),n(f,v,b)),m[P]),k[P]),_=t(a(c),o(c,d,p)),y=b,b=v,v=f,f=t(h,g),h=p,p=d,d=c,c=t(g,_);w[0]=t(c,w[0]),w[1]=t(d,w[1]),w[2]=t(p,w[2]),w[3]=t(h,w[3]),w[4]=t(f,w[4]),w[5]=t(v,w[5]),w[6]=t(b,w[6]),w[7]=t(y,w[7])}return w}(function(e){for(var t=Array(),i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<24-i%32;return t}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e)),8*e.length))}var $=function(){function e(t){b()(this,e),x()(this,"isInitialized",!1),x()(this,"isInitializing",!1),x()(this,"_backgroundTimer",null),x()(this,"_backgroundJobs",[]),x()(this,"_firstOpenAndLogin",!1),this._abxOptions=t,this._abxUtil=new j(this._abxOptions),this._abxCookie=new B(this._abxOptions),this._abxUserProperty=new F(this._abxOptions),this._abxEventProperty=new z(this._abxOptions),this._abxEvent=new Q(this._abxOptions),this._abxUrlParam=new X(this._abxOptions)}return g()(e,[{key:"_addBackground",value:function(e){this._backgroundJobs.push(e)}},{key:"_execBackgound",value:function(){var e=this;this._backgroundTimer=window.setInterval((function(){e._backgroundJobs.length>0&&e._backgroundJobs.forEach((function(t){return t(e)}))}),18e5)}},{key:"_cleanBackground",value:function(){this._backgroundTimer&&(window.clearInterval(this._backgroundTimer),this._backgroundJobs=[])}},{key:"_syncDailyFirstOpen",value:function(e){var t=e._abxCookie.getLastDailyFirstOpenTimeCookie();t&&(new Date).toDateString()!==new Date(t).toDateString()&&(e._abxOptions.trace.info("daily_first_open event send..!"),e.sendEvent("daily_first_open",{},!0),e._abxCookie.setLastDailyFirstOpenTimeCookie((new Date).getTime()))}},{key:"_initAdbrixCore",value:function(){if(this.isInitialized){var e=N(),t=this._abxUtil.getAdbrixPropertyV2("abx:domain",e);t&&this._abxEvent.addCommonParam(t);var i=T();if(this._abxOptions.isUtmParsing&&this._abxEvent.addCommonParams(this._abxUrlParam.getUtmParamData(i)),this._abxOptions.isNaverParsing&&this._abxEvent.addCommonParams(this._abxUrlParam.getNaverParamData(i)),this._abxOptions.isincludeGclid&&this._abxEvent.addCommonParams(this._abxUrlParam.getGclidParamData(i)),this._abxOptions.isIncludeReferrer){var r=C(document.referrer),n=this._abxUtil.getAdbrixPropertyV2("abx:ref_host",r.hostname);n&&this._abxEvent.addCommonParam(n);var o=this._abxUtil.getAdbrixPropertyV2("abx:ref_path",r.pathname);o&&this._abxEvent.addCommonParam(o)}if(this._abxOptions.supportUrlQueryKeys&&this._abxEvent.addCommonParams(this._abxUrlParam.getCustomParamData(i,this._abxOptions.supportUrlQueryKeys)),this._abxOptions.userHash?this.userHash=this._abxOptions.userHash:this._abxOptions.userHash=this._abxCookie.getUserHashId(),this._abxCookie.isFirstPartyCookie()){this._abxCookie.syncSessionIdCookie(),this._abxUserProperty.syncUserPropertyWithCookie();var a=i.abx_tid;!this._abxUtil.isNil(a)&&this._abxUtil.isValidTimestampAndGuid(a)&&(this._abxCookie.setLastDeeplinkOpenIdCookie(),this.sendEvent("deeplink_open",{"abx:deeplink_adkey":a},!0)),this.sendEvent("start_session",{},!0),this._syncDailyFirstOpen(this)}else{this._abxCookie.setFirstPartyCookie(),this._abxCookie.setSessionIdCookie(),this._abxCookie.setLastFirstOpenIdCookie(),this._abxCookie.setLastDailyFirstOpenTimeCookie((new Date).getTime());var s=[],u=i.abx_tid;!this._abxUtil.isNil(u)&&this._abxUtil.isValidTimestampAndGuid(u)?s.push({evtName:"firstopen",evtProps:{"abx:click_adkey":u}}):s.push({evtName:"firstopen",evtProps:{}}),s.push({evtName:"start_session",evtProps:{}}),this.sendEventBulk(s,!0),this._firstOpenAndLogin&&this.sendEvent("login",{},!0)}this._abxOptions.isExecPageViewEvent&&this.sendEvent("page_view",{},!0),this._addBackground(this._abxCookie.syncSessionIdCookie),this._addBackground(this._syncDailyFirstOpen)}}},{key:"init",value:function(e){var t=this;return this.isInitializing=!0,new Promise((function(i,r){var n,o;t._abxOptions.appkey&&r(Error("appkey has already been added.")),(null==e?void 0:e.appkey)||r(Error("required appkey..")),22!==(null==e||null===(n=e.appkey)||void 0===n?void 0:n.length)&&r(Error("not a valid appkey..")),(null==e?void 0:e.webSecretkey)||r(Error("required webSecretkey..")),22!==(null==e||null===(o=e.webSecretkey)||void 0===o?void 0:o.length)&&r(Error("not a valid webSecretkey..")),function(e){return new Promise((function(t,i){var r=!!window.XDomainRequest,n=r?new window.XDomainRequest:new XMLHttpRequest;n.open(e.method,e.url),n.timeout=1e3,r?(n.onload=function(){t(n.responseText)},n.onerror=function(){"Request Entity Too Large"===n.responseText?i({status:413,statusText:n.responseText}):i({status:500,statusText:n.responseText})},n.ontimeout=function(){},n.onprogress=function(){}):(n.onload=function(){this.status>=200&&this.status<300?t(n.response):i({status:this.status,statusText:n.statusText})},n.onerror=function(){i({status:this.status,statusText:n.statusText})},e.headers&&Object.keys(e.headers).forEach((function(t){n.setRequestHeader(t,e.headers[t])})));var o=e.params;o&&"object"===A()(o)&&(o=Object.keys(o).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(o[e])})).join("&")),n.send(o)}))}({method:"GET",url:"".concat("https://static.adbrix.io/web-sdk/apps/").concat(Z(e.appkey),".json")}).then((function(t){t||r();var n=JSON.parse(t);n.measurement||r(Error("Your app is inactive web sdk add-on package.")),n.appkey!==e.appkey&&r(Error("not a valid appkey..")),null===n.web_secretkey_sha256&&r(Error("Please add the web platform in console.adbrix.io")),n.web_secretkey_sha256!==Z(e.webSecretkey)&&r(Error("not a valid webSecretkey..")),i(n)})).catch((function(e){r(Error("App information could not be loaded."))}))})).then((function(i){return t.isInitialized=!0,t._abxOptions.setOptions(e,i),t._initAdbrixCore(),t._execBackgound(),i})).catch((function(e){return t.isInitialized=!1,Promise.reject(e)})).finally((function(){t.isInitializing=!1}))}},{key:"isVaildAppkey",value:function(){return!!this._abxOptions.appkey}},{key:"getUserProperty",value:function(){var e=this._abxUserProperty.userProperty;return this._abxUtil.parsePropertiesV1(e.userProperty)}},{key:"setUserProperty",value:function(e,t){var i=this._abxUtil.getAdbrixPropertyV2(e,t);if(i){var r=this._abxUserProperty.userProperty,n=!1;r.userProperty&&(n=r.userProperty.some((function(e){return e.key===i.key&&e.value===i.value&&e.dataType===i.dataType}))),this._abxUserProperty.setUserPropertyKeyValue(i),"user_id"===e&&this.isInitialized&&this._abxCookie.getFirstPartyCookie()?(this._abxOptions.trace.info("login"),this.sendEvent("login",{},!0)):!this.isNilUserHash&&this.isInitialized&&this._abxCookie.getFirstPartyCookie()&&!n&&(this._abxOptions.trace.info("changed User Property"),this.sendEvent("user_property_changed",{},!0))}}},{key:"syncUserProperty",value:function(){this._abxUserProperty.syncUserPropertyWithCookie()}},{key:"removeUserProperty",value:function(e){this._abxUserProperty.removeUserPropertyKey(e)&&!this.isNilUserHash&&this.isInitialized&&(this._abxOptions.trace.info("changed User Property"),this.sendEvent("user_property_changed",{},!0))}},{key:"removesUserProperty",value:function(e){var t=this,i=[];e.forEach((function(e){var r=t._abxUserProperty.removeUserPropertyKey(e);i.push(r)})),i.some((function(e){return e}))&&!this.isNilUserHash&&this.isInitialized&&(this._abxOptions.trace.info("changed User Property"),this.sendEvent("user_property_changed",{},!0))}},{key:"clearUserProperty",value:function(){this._abxUserProperty.clearUserProperty()}},{key:"sendEvent",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.isInitialized)return this._abxOptions.trace.error('This event will be send after "adbrix.init({...arg});"'),!1;var n=this._abxEventProperty.eventParam(e,t,r);return null==n?(this._abxOptions.trace.error('Invalid Parameters"'),!1):(this._abxEvent.sendEvent(n,i),!0)}},{key:"sendEventBulk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.isInitialized)return this._abxOptions.trace.error('This event will be send after "adbrix.init({...arg});"'),!1;for(var i=[],r=0;r<e.length;r++){var n=e[r],o=this._abxEventProperty.eventParam(n.evtName,n.evtProps);if(null==o)return this._abxOptions.trace.error('Invalid Parameters"'),!1;i.push(o)}return this._abxEvent.sendEventBulk(i,t),!0}},{key:"userHash",get:function(){return this._abxOptions.userHash},set:function(e){this._abxOptions.userHash=e,null!=e?(this.setUserProperty("user_id",e),this._abxCookie.getUserHashId()||(this._firstOpenAndLogin=!0),this._abxCookie.setUserHashId(e)):(this.removeUserProperty("user_id"),this._abxCookie.removeUserHashId(),this.clearUserProperty(),this._abxOptions.trace.info("logout"),this.sendEvent("logout",{},!0))}},{key:"traceListener",get:function(){return this._abxOptions.traceListener},set:function(e){this._abxOptions.traceListener=e}},{key:"isNilUserHash",get:function(){var e,t=null===(e=this._abxOptions)||void 0===e?void 0:e.userHash;return null===t||""===t}}]),e}(),ee=function(){function e(){var t=this;b()(this,e),x()(this,"appLandingMetaInfo",null),x()(this,"global",{sdkVersion:D.SDK_VERSION,apiVersion:D.API_VERION,sessionExpireSec:1800}),x()(this,"_trace",{error:function(e){t.traceLevel>=l.ERROR&&t.traceListener("".concat(e),l.ERROR)},warn:function(e){t.traceLevel>=l.WARN&&t.traceListener("".concat(e),l.WARN)},info:function(e){t.traceLevel>=l.INFO&&t.traceListener("".concat(e),l.INFO)}}),x()(this,"options",{appkey:null,webSecretkey:null,userHash:null,appVersion:"default",isOptOut:!1,isIncludeUtm:!0,isIncludeNaver:!0,isIncludeReferrer:!0,isincludeGclid:!0,isExecPageViewEvent:!0,supportUrlQueryKeys:[],shareSubdomainCookie:!0,traceLevel:l.ERROR,traceListener:function(e,t){try{switch(t){case l.ERROR:console.error("".concat("[adbrix]"," Error: ").concat(e));break;case l.INFO:console.log("".concat("[adbrix]"," Info: ").concat(e));break;case l.WARN:console.warn("".concat("[adbrix]"," Warn: ").concat(e));break;case l.DISABLE:}}catch(e){}}})}return g()(e,[{key:"setOptions",value:function(e,t){e&&(this.options=Object.assign(this.options,e),this.trace.info("init adbrix sdk")),t&&(this.appLandingMetaInfo=t)}},{key:"sdkVersion",get:function(){return this.global.sdkVersion}},{key:"apiVersion",get:function(){return this.global.apiVersion}},{key:"sessionExpireSec",get:function(){return this.global.sessionExpireSec}},{key:"appkey",get:function(){return this.options.appkey}},{key:"webSecretkey",get:function(){return this.options.webSecretkey}},{key:"userHash",get:function(){return this.options.userHash},set:function(e){this.options.userHash=e}},{key:"appVersion",get:function(){return this.options.appVersion}},{key:"isOptOut",get:function(){return this.options.isOptOut}},{key:"isUtmParsing",get:function(){return this.options.isIncludeUtm}},{key:"isNaverParsing",get:function(){return this.options.isIncludeNaver}},{key:"isIncludeReferrer",get:function(){return this.options.isIncludeReferrer}},{key:"isincludeGclid",get:function(){return this.options.isincludeGclid}},{key:"isExecPageViewEvent",get:function(){return this.options.isExecPageViewEvent}},{key:"supportUrlQueryKeys",get:function(){return this.options.supportUrlQueryKeys}},{key:"shareSubdomainCookie",get:function(){return this.options.shareSubdomainCookie}},{key:"traceLevel",get:function(){return this.options.traceLevel}},{key:"trace",get:function(){return this._trace}},{key:"traceListener",get:function(){return this.options.traceListener},set:function(e){this.options.traceListener=e}}]),e}(),te=Object.values(o),ie=Object.values(a),re=Object.values(s),ne=new(function(){function e(t){var i=this;b()(this,e),x()(this,"queue",[]),x()(this,"commerceAttr",{categories:function(e,t,r,n,o){if(i.beforeEach("commerceData.categories",e,t,r,n,o)){if(i._abxUtil.isNil(e))return i.abxOptions.trace.error("required category... '".concat(e,"'")),null;if(!i._abxUtil.isValidInputValueType("category",e,["string"]))return null;var a={"abx:category1":e};if(!i._abxUtil.isNil(t)){if(!i._abxUtil.isValidInputValueType("category2",t,["string"]))return null;a["abx:category2"]=t}if(!i._abxUtil.isNil(r)){if(!i._abxUtil.isValidInputValueType("category3",r,["string"]))return null;a["abx:category3"]=r}if(!i._abxUtil.isNil(n)){if(!i._abxUtil.isValidInputValueType("category4",n,["string"]))return null;a["abx:category4"]=n}if(!i._abxUtil.isNil(o)){if(!i._abxUtil.isValidInputValueType("category5",o,["string"]))return null;a["abx:category5"]=o}return a}},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(i.beforeEach("commerceData.product",e,t,r,n,o,a,s,u)){if(!i._abxUtil.isValidInputValueType("price",r,["number"]))return null;if(!i._abxUtil.isValidInputValueType("quantity",n,["number"]))return null;if(!i._abxUtil.isValidInputValueType("discount",o,["number"]))return null;var l={"abx:item_id":M(),"abx:price":r,"abx:quantity":n,"abx:discount":o,"abx:sales":(r-o)*n};if(!i._abxUtil.isNil(e)){if(!i._abxUtil.isValidInputValueType("productId",e,["string","null"]))return null;l["abx:product_id"]=e}if(!i._abxUtil.isNil(t)){if(!i._abxUtil.isValidInputValueType("productName",t,["string","null"]))return null;l["abx:product_name"]=t}if(!i._abxUtil.isNil(a)){var c=ie.some((function(e){return e===a}));if(i._abxUtil.isNil(c)||!c)return i.abxOptions.trace.error("Not a valid currency. Only '".concat(ie.join(", "),"' are allowed.")),null;if(!i._abxUtil.isValidInputValueType("currency",a.toString(),["string"]))return null;l["abx:currency"]=a}if(!i._abxUtil.isNil(s)){if(!R(s,"abx:category1"))return null;l=i._abxUtil.jsonMerge(l,s)}if(!i._abxUtil.isNil(u)){if(!i._abxUtil.isValidInputProperties(u))return i.abxOptions.trace.error("Not a valid '".concat(u,"'. Only JSON are allowed.")),null;if(!i._abxUtil.isValidInputPropertiesKeyValue(u))return null;l=i._abxUtil.jsonMerge(u,l)}return l}}}),x()(this,"userProperty",{get:function(e){var t=i._abxCore.getUserProperty();if(null==t)return null;var r=t[e.toLowerCase()];return i._abxUtil.isNil(r)?null:r},getAll:function(){return i._abxCore.getUserProperty()},addOrUpdate:function(e,t){if(i.beforeEach("userProperty.addOrUpdate",e,t)){if(!i._abxUtil.isValidInputKey(e))return;var r=e.toLowerCase();if("user_id"===r)return void i.abxOptions.trace.error("user_id value cannot be changed");if(i._abxUtil.isNil(t)||!i._abxUtil.isValidInputValue(t))return;i._abxCore.setUserProperty(r,t)}},remove:function(e){if(i.beforeEach("userProperty.remove",e)){if(!i._abxUtil.isValidInputKey(e))return;var t=e.toLowerCase();if("user_id"===t)return void i.abxOptions.trace.error("user_id cannot. If you want to delete it, please logout method.");i._abxCore.removeUserProperty(t)}},removes:function(e){if(i.beforeEach("userProperty.removes",e)){if("array"!==i._abxUtil.getType(e))return void i.abxOptions.trace.error("Not a valid value. Only (array)");for(var t=e.map((function(e){return e.toLowerCase()})),r=0;r<t.length;r++){var n=t[r];if(!i._abxUtil.isValidInputKey(n))return;if("user_id"===n)return void i.abxOptions.trace.error("user_id cannot. If you want to delete it, please logout method.")}i._abxCore.removesUserProperty(t)}}}),x()(this,"common",{signUp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i.beforeEach("common.signUp",e,t)){if(i._abxUtil.isNil(e))return i.abxOptions.trace.error("required signChannel... '".concat(e,"'")),!1;var r=te.some((function(t){return t===e}));if(i._abxUtil.isNil(r)||!r)return i.abxOptions.trace.error("Not a valid signChannel. Only '".concat(te.join(", "),"' are allowed.")),!1;if(!i._abxUtil.isValidInputValueType("signChannel",e.toString(),["string"]))return!1;var n={"abx:sign_channel":e.toString()};if(!i._abxUtil.isNil(t)){if(!i._abxUtil.isValidInputProperties(t))return i.abxOptions.trace.error("Not a valid '".concat(t,"'. Only JSON are allowed.")),!1;if(!i._abxUtil.isValidInputPropertiesKeyValue(t))return!1;n=i._abxUtil.jsonMerge(t,n)}return i._abxCore.sendEvent("sign_up",n,!0)}},invite:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i.beforeEach("common.invite",e,t,r)){if(i._abxUtil.isNil(e))return i.abxOptions.trace.error("required inviteChannel... '".concat(e,"'")),!1;var n=te.some((function(t){return t===e}));if(!i._abxUtil.isValidInputValueType("inviteChannel",e.toString(),["string"])||!n)return i.abxOptions.trace.error("Not a valid inviteChannel. Only '".concat(te.join(", "),"' are allowed.")),!1;if(i._abxUtil.isNil(t))return i.abxOptions.trace.error("required userId... '".concat(t,"'")),!1;if(!i._abxUtil.isValidInputValueType("userId",t,["string","number"]))return!1;if(""===t)return i.abxOptions.trace.error("The key must have a userId of at least 1 character."),!1;var o={"abx:invite_channel":e.toString(),user_id:t};if(!i._abxUtil.isNil(r)){if(!i._abxUtil.isValidInputProperties(r))return i.abxOptions.trace.error("Not a valid '".concat(r,"'. Only JSON are allowed.")),!1;if(!i._abxUtil.isValidInputPropertiesKeyValue(r))return!1;o=i._abxUtil.jsonMerge(r,o)}return i._abxCore.sendEvent("invite",o,!0)}},useCredit:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i.beforeEach("common.useCredit",e,t)){if(i._abxUtil.isNil(e))return i.abxOptions.trace.error("required credit... '".concat(e,"'")),!1;if(!i._abxUtil.isValidInputValueType("credit",e,["number"]))return!1;var r={credit:e};if(!i._abxUtil.isNil(t)){if(!i._abxUtil.isValidInputProperties(t))return i.abxOptions.trace.error("Not a valid '".concat(t,"'. Only JSON are allowed.")),!1;if(!i._abxUtil.isValidInputPropertiesKeyValue(t))return!1;r=i._abxUtil.jsonMerge(t,r)}return i._abxCore.sendEvent("use_credit",r,!0)}},purchase:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(i.beforeEach("common.purchase",e,t,r,n,o,a,s)){var u={"abx:order_sales":r,"abx:discount":n,"abx:delivery_charge":o};if(!i._abxUtil.isNil(e)){if(!i._abxUtil.isValidInputValueType("orderId",e,["string","null"]))return!1;u["abx:order_id"]=e}if(!i._abxUtil.isNil(a)){var l=re.some((function(e){return e===a}));if(i._abxUtil.isNil(l)||!l)return i.abxOptions.trace.error("Not a valid paymentMethod. Only '".concat(re.join(", "),"' are allowed.")),!1;if(!i._abxUtil.isValidInputValueType("paymentMethod",a.toString(),["string"]))return!1;u["abx:payment_method"]=a}if(!i._abxUtil.isNil(t)){for(var c=0;c<t.length;c++){var d=t[c];if(!R(d,"abx:item_id"))return i.abxOptions.trace.error("required product[".concat(c,"] abx:item_id")),!1}u["abx:items"]=t}if(!i._abxUtil.isNil(s)){if(!i._abxUtil.isValidInputProperties(s))return i.abxOptions.trace.error("Not a valid '".concat(s,"'. Only JSON are allowed.")),!1;if(!i._abxUtil.isValidInputPropertiesKeyValue(s))return!1;u=i._abxUtil.jsonMerge(s,u)}return i._abxCore.sendEvent("purchase",u,!0)}}}),x()(this,"event",{send:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i.beforeEach("event.send",e,t)){if(i._abxUtil.isNil(e))return i.abxOptions.trace.error("required key... '".concat(e,"'")),!1;if(!i._abxUtil.isValidInputKey(e))return!1;var r=e.toLowerCase(),n=null;if(!i._abxUtil.isNil(t)){if(!i._abxUtil.isValidInputProperties(t))return i.abxOptions.trace.error("Not a valid '".concat(t,"'. Only JSON are allowed.")),!1;if(!i._abxUtil.isValidInputPropertiesKeyValue(t))return!1;n=t}return i._abxCore.sendEvent(r,n,!1,!0)}}}),x()(this,"debug",{traceListener:function(e){return i._abxCore.traceListener=e}}),this.abxOptions=new ee,this._abxCore=new $(this.abxOptions),this._abxUtil=new j(this.abxOptions),""!==N()?(this.setQueue(t),this):this.abxOptions.trace.error("There is no host name. Please run it in a web server environment.")}var t;return g()(e,[{key:"setQueue",value:function(e){null!=e&&"array"===this._abxUtil.getType(e)&&(this.queue=e.slice())}},{key:"_cleanQueue",value:function(){this.queue=[]}},{key:"runQueuedFunctions",value:function(){var e=this;return new Promise((function(t,i){var r=e.queue.filter((function(e){return"init"===e[0]}));r.length>1&&i(Error("Please execute the initialization function only once.")),r.length<1&&i(Error("Please execute the initialization function only once.")),e.invoke(r[0]).then((function(){e.queue.filter((function(e){return r.every((function(t){return t!==e}))})).forEach((function(t){return e.invoke(t)})),e._cleanQueue(),t()})).catch((function(e){i(e)}))})).catch((function(t){return e.abxOptions.trace.error(t.message),Promise.reject(t)}))}},{key:"invoke",value:function(e){var t=e[0];if("string"!==this._abxUtil.getType(t))return!1;var i=e[1];["arguments","array"].includes(this._abxUtil.getType(i))||(i=[i]);var r=t.split("."),n=r.pop();return r.reduce((function(e,t){return e[t]=e[t]||{}}),this)[n].apply(this,i)}},{key:"beforeEach",value:function(e){if(this._abxCore.isInitializing){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return this.queue.push([e,i]),!1}return!!this._abxCore.isInitialized||(this.abxOptions.trace.error("Please execute initialization function first."),!1)}},{key:"init",value:(t=f()(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._abxCore.isInitialized){e.next=2;break}return e.abrupt("return",Promise.reject(Error("It has already been initialized.")));case 2:if(this._abxCore.isInitializing){e.next=4;break}return e.abrupt("return",this._abxCore.init(t));case 4:return e.abrupt("return",Promise.reject(Error("The initialization function is running.")));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onInitialized",value:function(e){this.beforeEach("onInitialized",e)&&"function"===this._abxUtil.getType(e)&&e()}},{key:"login",value:function(e){if(this.beforeEach("login",e)){if(this._abxUtil.isNil(e)||!this._abxUtil.isValidInputValueType("userId",e,["string","number"]))return;if(""===e)return void this.abxOptions.trace.error("The userId must have a value of at least 1 character.");this._abxCore.userHash=e}}},{key:"getUserId",value:function(){return this._abxCore.userHash}},{key:"logout",value:function(){this.beforeEach("logout")&&(this._abxCore.userHash=null)}},{key:"isInitialized",get:function(){return this._abxCore.isInitialized}}]),e}())(window&&window.adbrix&&window.adbrix.queue||[])}])}));